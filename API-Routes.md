## USER AUTHENTICATION/AUTHORIZATION

### All endpoints that require authentication

All endpoints that require a current user to be logged in.

- Request: endpoints that require authentication
- Error Response: Require authentication

  - Status Code: 401
  - Headers:
    - Content-Type: application/json
  - Body:

    ```json
    {
      "message": "Authentication required"
    }
    ```

### All endpoints that require proper authorization

All endpoints that require authentication and the current user does not have the
correct role(s) or permission(s).

- Request: endpoints that require proper authorization
- Error Response: Require proper authorization

  - Status Code: 403
  - Headers:
    - Content-Type: application/json
  - Body:

    ```json
    {
      "message": "Forbidden"
    }
    ```

### Get the Current User

Returns the information about the current user that is logged in.

- Request

  - Method: GET
  - URL: /api/auth
  - Body: none

- Successful Response when there is a logged in user

  - Status Code: 200
  - Headers:
    - Content-Type: application/json
  - Body:

    ```json
    {
      "user": {
        "id": 1,
        "firstName": "John",
        "lastName": "Smith",
        "email": "john.smith@gmail.com",
        "username": "JohnSmith",
        "avatar": "url",
        "createdAt": "2021-11-19 20:39:36",
        "updatedAt": "2021-11-20 10:06:40"
      }
    }
    ```

- Successful Response when there is no logged in user

  - Status Code: 200
  - Headers:
    - Content-Type: application/json
  - Body:

    ```json
    {
      "user": null
    }
    ```

### Log In a User

Logs in a current user with valid credentials and returns the current user's
information.

- Require Authentication: false
- Request

  - Method: POST
  - URL: /api/auth/login
  - Headers:
    - Content-Type: application/json
  - Body:

    ```json
    {
      "credential": "john.smith@gmail.com",
      "password": "secret password"
    }
    ```

- Successful Response

  - Status Code: 200
  - Headers:
    - Content-Type: application/json
  - Body:

    ```json
    {
      "user": {
        "id": 1,
        "firstName": "John",
        "lastName": "Smith",
        "email": "john.smith@gmail.com",
        "username": "JohnSmith",
        "avatar": "url",
        "createdAt": "2021-11-19 20:39:36",
        "updatedAt": "2021-11-20 10:06:40"
      }
    }
    ```

- Error Response: Invalid credentials

  - Status Code: 401
  - Headers:
    - Content-Type: application/json
  - Body:

    ```json
    {
      "message": "Invalid credentials"
    }
    ```

- Error response: Body validation errors

  - Status Code: 400
  - Headers:
    - Content-Type: application/json
  - Body:

    ```json
    {
      "message": "Bad Request", // (or "Validation error" if generated by Sequelize),
      "errors": {
        "credential": "Email is required",
        "password": "Password is required"
      }
    }
    ```

### Sign Up a User

Creates a new user, logs them in as the current user, and returns the current
user's information.

- Require Authentication: false
- Request

  - Method: POST
  - URL: /api/auth/signup
  - Headers:
    - Content-Type: application/json
  - Body:

    ```json
    {
      "firstName": "John",
      "lastName": "Smith",
      "email": "john.smith@gmail.com",
      "username": "JohnSmith",
      "password": "secret password",
      "avatar": "url"
    }
    ```

- Successful Response

  - Status Code: 200
  - Headers:
    - Content-Type: application/json
  - Body:

    ```json
    {
      "user": {
        "id": 1,
        "firstName": "John",
        "lastName": "Smith",
        "email": "john.smith@gmail.com",
        "username": "JohnSmith",
        "createdAt": "2021-11-19 20:39:36",
        "updatedAt": "2021-11-20 10:06:40"
      }
    }
    ```

- Error response: User already exists with the specified email

  - Status Code: 500
  - Headers:
    - Content-Type: application/json
  - Body:

    ```json
    {
      "message": "User already exists",
      "errors": {
        "email": "User with that email already exists"
      }
    }
    ```

- Error response: User already exists with the specified username

  - Status Code: 500
  - Headers:
    - Content-Type: application/json
  - Body:

    ```json
    {
      "message": "User already exists",
      "errors": {
        "username": "User with that username already exists"
      }
    }
    ```

- Error response: Body validation errors

  - Status Code: 400
  - Headers:
    - Content-Type: application/json
  - Body:

    ```json
    {
      "message": "Bad Request", // (or "Validation error" if generated by Sequelize),
      "errors": {
        "email": "Invalid email",
        "username": "Username is required",
        "firstName": "First Name is required",
        "lastName": "Last Name is required"
      }
    }
    ```

## Books

### Get all Books

Returns all the books.

- Require Authentication: false
- Request

  - Method: GET
  - URL: /api/books
  - Body: none

- Successful Response

  - Status Code: 200
  - Headers:
    - Content-Type: application/json
  - Body:

    ```json
    {
      "Books": [
        {
          "id": 1,
          "title": "Harry Potter",
          "author": "J.K. Rowling",
          "preview": "image url"
        }
      ]
    }
    ```

### Get book specified by id

Returns full book specified by id

- Require Authentication: false
- Request

  - Method: GET
  - URL: /api/books/:bookId
  - Body: none

- Successful Response

  - Status Code: 200
  - Headers:
    - Content-Type: application/json
  - Body:

    ```json
    {
      "Book_Details": [
        {
          "id": 1,
          "title": "Harry Potter",
          "author": "J.K. Rowling",
          "content": "Once upon a time...",
          "preview": "image url"
        }
      ]
    }
    ```

### Get all Favorite books

Returns all the favorite books of the current user.

- Require Authentication: true
- Request

  - Method: GET
  - URL: /api/session/favorites
  - Body: none

- Successful Response

  - Status Code: 200
  - Headers:
    - Content-Type: application/json
  - Body:

    ```json
    {
      "Books": [
        {
          "id": 1,
          "title": "Harry Potter",
          "author": "J.K. Rowling",
          "preview": "image url",
          "createdAt": "2021-11-19 20:39:36",
          "updatedAt": "2021-11-20 10:06:40"
        }
      ]
    }
    ```

### Add to Favorite books

Add to favorite books of the current user.

- Require Authentication: true
- Request

  - Method: POST
  - URL: /api/session/favorites
  - Body:
    ```json
    {
      "user_id": 1,
      "book_id": 2
    }
    ```

- Successful Response

  - Status Code: 200
  - Headers:
    - Content-Type: application/json
  - Body:

    ```json
    {
      "message": "Successfully added to favorites"
    }
    ```

### Remove from Favorite books

Remove from favorite books of the current user.

- Require Authentication: true
- Request

  - Method: DELETE
  - URL: /api/session/favorites
  - Body:
    ```json
    {
      "user_id": 1,
      "book_id": 2
    }
    ```

- Successful Response

  - Status Code: 200
  - Headers:
    - Content-Type: application/json
  - Body:

    ```json
    {
      "message": "Successfully removed from favorites"
    }
    ```

## Comments

### Get all comments for a book specified by id

Returns all the comments for a book specified by id.

- Require Authentication: true
- Request

  - Method: GET
  - URL: /api/books/:bookId/comments
  - Body: none

- Successful Response

  - Status Code: 200
  - Headers:
    - Content-Type: application/json
  - Body:

    ```json
    {
      "Comments": [
        {
          "id": 1,
          "comment": "This is my favorite part!",
          "createdAt": "2021-11-19 20:39:36",
          "updatedAt": "2021-11-20 10:06:40"
        }
      ]
    }
    ```

- Error response: Couldn't find a Book with the specified id

  - Status Code: 404
  - Headers:
    - Content-Type: application/json
  - Body:

    ```json
    {
      "message": "Book couldn't be found"
    }
    ```

### Add a comment for a book specified by id

Create and return a new comment for a book specified by id.

- Require Authentication: true

  - Method: POST
  - URL: /api/books/:bookId/comments
  - Headers:
    - Content-Type: application/json
  - Body:

    ```json
    {
      "comment": "This is my favorite part",
      "visibility": "Club1; Club2",
      "book_location": 56,
      "book_id": 2,
      "user_id": 3
    }
    ```

- Successful Response

  - Status Code: 200
  - Headers:
    - Content-Type: application/json
  - Body:

    ```json
    {
      "id": 1,
      "comment": "This is my favorite part",
      "visibility": "Club1; Club2",
      "book_id": 2,
      "user_id": 3,
      "book_location": 56,
      "flagged": false,
      "createdAt": "2021-11-19 20:39:36",
      "updatedAt": "2021-11-20 10:06:40"
    }
    ```

- Error response: Couldn't find a Book with the specified id

  - Status Code: 404
  - Headers:
    - Content-Type: application/json
  - Body:

    ```json
    {
      "message": "Book couldn't be found"
    }
    ```

### Edit a comment for a book specified by id

Create and return a new comment for a book specified by id.

- Require Authentication: true

  - Method: PUT
  - URL: /api/comments/:commentId
  - Headers:
    - Content-Type: application/json
  - Body:

    ```json
    {
      "id": 1,
      "comment": "This is my favorite part",
      "visibility": "Club1; Club2",
      "flagged": false
    }
    ```

- Successful Response

  - Status Code: 200
  - Headers:
    - Content-Type: application/json
  - Body:

    ```json
    {
      "id": 1,
      "comment": "This is my favorite part",
      "visibility": "Club1; Club2",
      "book_id": 2,
      "user_id": 3,
      "book_location": 56,
      "flagged": false,
      "createdAt": "2021-11-19 20:39:36",
      "updatedAt": "2021-11-20 10:06:40"
    }
    ```

- Error response: Couldn't find a Book with the specified id

  - Status Code: 404
  - Headers:
    - Content-Type: application/json
  - Body:

    ```json
    {
      "message": "Book couldn't be found"
    }
    ```

### Delete a Comment

Deletes an existing Comment.

- Require Authentication: true
- Require proper authorization: Comment must belong to the current user
- Request

  - Method: DELETE
  - URL: /api/comments/:commentId
  - Body: none

- Successful Response

  - Status Code: 200
  - Headers:
    - Content-Type: application/json
  - Body:

    ```json
    {
      "message": "Successfully deleted"
    }
    ```

- Error response: Couldn't find a Comment with the specified id

  - Status Code: 404
  - Headers:
    - Content-Type: application/json
  - Body:

    ```json
    {
      "message": "Comment couldn't be found"
    }
    ```

## Bookmark

### Get bookmark

Get a reading position for the current user of book specified by id

- Require Authentication: true

  - Method: GET
  - URL: /api/books/:bookId/bookmark
  - Headers:
    - Content-Type: application/json
  - Body: None

- Successful Response

  - Status Code: 200
  - Headers:
    - Content-Type: application/json
  - Body:

    ```json
    {
      "id": 1,
      "user_id": 2,
      "book_id": 3,
      "position": 603,
    }
    ```

### Create bookmark

Creates a reading position for the current user of book specified by id

- Require Authentication: true

  - Method: Post
  - URL: /api/books/:bookId/bookmark
  - Headers:
    - Content-Type: application/json
  - Body:

    ```json
    {
      "id": 1,
      "user_id": 2,
      "book_id": 3,
      "position": 603
    }
    ```

- Successful Response

  - Status Code: 200
  - Headers:
    - Content-Type: application/json
  - Body:

    ```json
    {
      "id": 1,
      "user_id": 2,
      "book_id": 3,
      "position": 603,
      "createdAt": "2021-11-19 20:39:36",
      "updatedAt": "2021-11-20 10:06:40"
    }
    ```

### Edit a bookmark

Updates and returns an existing reading position.

- Require Authentication: true
- Require proper authorization: Bookmark must belong to the current user
- Request

  - Method: PUT
  - URL: /api/bookmark/:bookmarkId
  - Headers:
    - Content-Type: application/json
  - Body:

    ```json
    {
      "id": 1,
      "position": 603
    }
    ```

- Successful Response

  - Status Code: 200
  - Headers:
    - Content-Type: application/json
  - Body:

    ```json
    {
      "id": 1,
      "user_id": 2,
      "book_id": 3,
      "position": 603,
      "createdAt": "2021-11-19 20:39:36",
      "updatedAt": "2021-11-20 10:06:40"
    }
    ```

- Error response: Couldn't find a Book with the specified id

  - Status Code: 404
  - Headers:
    - Content-Type: application/json
  - Body:

    ```json
    {
      "message": "Book couldn't be found"
    }
    ```

## Reactions

### Get all Reactions of the comment specified by Id

Returns all the reactions of a comment specified by id

- Require Authentication: true

  - Method: GET
  - URL: /api/comment/:commentId/reactions
  - Body: none

- Successful Response

  - Status Code: 200
  - Headers:
    - Content-Type: application/json
  - Body:

    ```json
    {
      "Reactions": [
        {
          "id": 1,
          "reaction": "&#128517",
          "flagger": false
        },
        {
          "id": 2,
          "reaction": "&#128517",
          "flagger": false
        }
      ]
    }
    ```

- Error response: Couldn't find a Comment with the specified id

  - Status Code: 404
  - Headers:
    - Content-Type: application/json
  - Body:

    ```json
    {
      "message": "Comment couldn't be found"
    }
    ```

### Create a reaction for a Comment based on the Comment's id

Create and return a new reaction for a Comment specified by id.

- Require Authentication: true
- Request

  - Method: POST
  - URL: /api/comments/:commentId/reactions
  - Headers:
    - Content-Type: application/json
  - Body:

    ```json
    {
      "reaction": "&#128517",
      "flagger": false
    }
    ```

- Successful Response

  - Status Code: 201
  - Headers:
    - Content-Type: application/json
  - Body:

    ```json
    {
      "id": 1,
      "reaction": "&#128517",
      "flagger": false,
      "createdAt": "2021-11-19 20:39:36",
      "updatedAt": "2021-11-19 20:39:36"
    }
    ```

- Error response: Reaction from the current user already exists for the comment

  - Status Code: 500
  - Headers:
    - Content-Type: application/json
  - Body:

    ```json
    {
      "message": "User already has a reaction for this comment"
    }
    ```

### Delete a reaction

Delete an existing reaction.

- Require Authentication: true
- Require proper authorization: Reaction must belong to the current user
- Request

  - Method: DELETE
  - URL: /api/reaction/:reactionId
  - Body: none

- Successful Response

  - Status Code: 200
  - Headers:
    - Content-Type: application/json
  - Body:

    ```json
    {
      "message": "Successfully deleted"
    }
    ```

- Error response: Couldn't find a reaction with the specified id

  - Status Code: 404
  - Headers:
    - Content-Type: application/json
  - Body:

    ```json
    {
      "message": "Reaction couldn't be found"
    }
    ```

## Clubs

### Get all of the Current User's Clubs

Return all the clubs that the current user is a part of.

- Require Authentication: true
- Request

  - Method: GET
  - URL: /api/clubs/current
  - Body: none

- Successful Response

  - Status Code: 200
  - Headers:
    - Content-Type: application/json
  - Body:

    ```json
    {
      "Clubs": [
        {
          "id": 1,
          "title": "Fiction Fans",
          "is_public": false,
          "createdAt": "2021-11-19 20:39:36",
          "updatedAt": "2021-11-19 20:39:36"
        }
      ]
    }
    ```

### Create a Club

Create and return a new Club

- Require Authentication: true

  - Method: POST
  - URL: /api/clubs
  - Headers:
    - Content-Type: application/json
  - Body:

    ```json
    {
      "title": "Fiction Fans",
      "is_public": false
    }
    ```

- Successful Response

  - Status Code: 200
  - Headers:
    - Content-Type: application/json
  - Body:

    ```json
    {
      "title": "Fiction Fans",
      "is_public": false,
      "createdAt": "2021-11-19 20:39:36",
      "updatedAt": "2021-11-19 20:39:36"
    }
    ```

- Error response: Body validation errors

  - Status Code: 400
  - Headers:
    - Content-Type: application/json
  - Body:

    ```json
    {
      "message": "Bad Request", // (or "Validation error" if generated by Sequelize),
      "errors": {
        "title": "Tile is required"
      }
    }
    ```

### Edit a Club

Update and return an existing Club.

- Require Authentication: true
- Require proper authorization: Club must belong to the current user
- Request

  - Method: PUT
  - URL: /api/clubs/:clubId
  - Headers:
    - Content-Type: application/json
  - Body:

    ```json
    {
      "title": "Fiction Fans",
      "is_public": false
    }
    ```

- Successful Response

  - Status Code: 200
  - Headers:
    - Content-Type: application/json
  - Body:

    ```json
    {
      "id": 1,
      "title": "Fiction Fans",
      "is_public": false,
      "createdAt": "2021-11-19 20:39:36",
      "updatedAt": "2021-11-20 10:06:40"
    }
    ```

- Error response: Body validation errors

  - Status Code: 400
  - Headers:
    - Content-Type: application/json
  - Body:

    ```json
    {
      "message": "Bad Request", // (or "Validation error" if generated by Sequelize),
      "errors": {
        "title": "Title is required"
      }
    }
    ```

- Error response: Couldn't find a Club with the specified id

  - Status Code: 404
  - Headers:
    - Content-Type: application/json
  - Body:

    ```json
    {
      "message": "Club couldn't be found"
    }
    ```

### Delete a Club

Delete an existing Club.

- Require Authentication: true
- Require proper authorization: Club must belong to the current user
- Request

  - Method: DELETE
  - URL: /api/clubs/:clubId
  - Body: none

- Successful Response

  - Status Code: 200
  - Headers:
    - Content-Type: application/json
  - Body:

    ```json
    {
      "message": "Successfully deleted"
    }
    ```

- Error response: Couldn't find a Club with the specified id

  - Status Code: 404
  - Headers:
    - Content-Type: application/json
  - Body:

    ```json
    {
      "message": "Club couldn't be found"
    }
    ```

### Get all of the books of a club specified by its id

Return all the books of a club specified by its id

- Require Authentication: true
- Request

  - Method: GET
  - URL: /api/clubs/:clubId/books
  - Body: none

- Successful Response

  - Status Code: 200
  - Headers:
    - Content-Type: application/json
  - Body:

    ```json
    {
      "Books": [
        {
          "id": 1,
          "title": "Harry Potter",
          "author": "J.K. Rowling",
          "preview": "url"
        }
      ]
    }
    ```

### Add a book to a Club

Add a book to an existing Club

- Require Authentication: true

  - Method: POST
  - URL: /api/clubs/:clubId/books
  - Headers:
    - Content-Type: application/json
  - Body:

    ```json
    {
      "book_id": 2,
      "club_id": 1
    }
    ```

- Successful Response

  - Status Code: 200
  - Headers:
    - Content-Type: application/json
  - Body:

    ```json
    {
      "id": 1,
      "book_id": 2,
      "club_id": 1,
      "createdAt": "2021-11-19 20:39:36",
      "updatedAt": "2021-11-19 20:39:36"
    }
    ```

### Delete an existing book in a club

Delete an existing book by its specified id in a specified club id

- Require Authentication: true
- Require proper authorization: Club must belong to the current user
- Request

  - Method: DELETE
  - URL: /api/clubs_books/:club_booksId
  - Body: none

- Successful Response

  - Status Code: 200
  - Headers:
    - Content-Type: application/json
  - Body:

    ```json
    {
      "message": "Successfully deleted"
    }
    ```

- Error response: Couldn't find a Club with the specified id

  - Status Code: 404
  - Headers:
    - Content-Type: application/json
  - Body:

    ```json
    {
      "message": "Club couldn't be found"
    }
    ```

### Get all of the members of a club specified by its id

Return all the members of a club specified by its id

- Require Authentication: true
- Request

  - Method: GET
  - URL: /api/clubs/:clubId/members
  - Body: none

- Successful Response

  - Status Code: 200
  - Headers:
    - Content-Type: application/json
  - Body:

    ```json
    {
      "Members": [
        {
          "username": "FictionFan123",
          "avatar": "url"
        }
      ]
    }
    ```

### Add a member to a Club

Add a member to an existing Club

- Require Authentication: true

  - Method: POST
  - URL: /api/clubs/:clubId/members
  - Headers:
    - Content-Type: application/json
  - Body:

    ```json
    {
      "user_id": 2,
      "club_id": 1
    }
    ```

- Successful Response

  - Status Code: 200
  - Headers:
    - Content-Type: application/json
  - Body:

    ```json
    {
      "id": 1,
      "user_id": 2,
      "club_id": 1,
      "createdAt": "2021-11-19 20:39:36",
      "updatedAt": "2021-11-19 20:39:36"
    }
    ```

### Delete an existing member in a club

Delete an existing member by its specified id in a specified club id

- Require Authentication: true
- Require proper authorization: Club must belong to the current user
- Request

  - Method: DELETE
  - URL: /api/clubs_members/:club_booksId
  - Body: none

- Successful Response

  - Status Code: 200
  - Headers:
    - Content-Type: application/json
  - Body:

    ```json
    {
      "message": "Successfully deleted"
    }
    ```

- Error response: Couldn't find a Club with the specified id

  - Status Code: 404
  - Headers:
    - Content-Type: application/json
  - Body:

    ```json
    {
      "message": "Club couldn't be found"
    }
    ```

## Friends

### Add Friend

Add a friend to users friend list

- Require Authentication: true

  - Method: Post
  - URL: /api/session/friends
  - Headers:
    - Content-Type: application/json
  - Body:

    ```json
    {
      "follower_id": 1,
      "following_id": 2
    }
    ```

- Successful Response

  - Status Code: 200
  - Headers:
    - Content-Type: application/json
  - Body:

    ```json
    {
      "id": 1,
      "follower_id": 1,
      "following_id": 2,
      "createdAt": "2021-11-19 20:39:36",
      "updatedAt": "2021-11-20 10:06:40"
    }
    ```

### Remove a friend

Removes a friend from your friend list

- Require Authentication: true

  - Method: DELETE
  - URL: /api/friends/:friendId
  - Headers:
    - Content-Type: application/json
  - Body:

    ```json
    {
      "id": 1
    }
    ```

- Successful Response

  - Status Code: 200
  - Headers:
    - Content-Type: application/json
  - Body:

    ```json
    {
      "message": "Successfully deleted"
    }
    ```

- Error response: Couldn't find a Friend with the specified id

  - Status Code: 404
  - Headers:
    - Content-Type: application/json
  - Body:

    ```json
    {
      "message": "Friend couldn't be found"
    }
    ```
